<div class="head">
  <div class="formulaire">
    <form [formGroup]="formulaireRecherche" (keyup)="onSubmit()">
      <input
        class="searchbar"
        type="text"
        placeholder="Rechercher un jeu"
        aria-label="Search"
        formControlName="recherche"
      />
    </form>

    <form [formGroup]="formulaireTri" (ngSubmit)="onSubmitTri()">
        <select formControlName="triage">
          <option value="" selected disabled>Trier par</option>
          <option *ngFor="let option of tri" [value]="option.value">
            {{ option.viewValue }}
          </option>
        </select>
      <button type="submit" class="cherche"><mat-icon>search</mat-icon></button>
    </form>
  </div>
</div>

<!-- AFFICHAGE PAR DEFAUT -->

<div *ngIf="listeSearch == null" class="listeCard">
  <mat-card class="example-card" *ngFor="let jeux of liste">
    <mat-card-header>
      <mat-card-title *ngIf="jeux.jeuxTitre.length > 30"
        >{{ jeux.jeuxTitre.substring(0, 30) }}...</mat-card-title
      >
      <mat-card-title *ngIf="jeux.jeuxTitre.length < 30">{{
        jeux.jeuxTitre
      }}</mat-card-title>
      <mat-card-subtitle>{{ jeux.jeuxGenre }}</mat-card-subtitle>
      <mat-card-subtitle>{{ jeux.jeuxEditeur }}</mat-card-subtitle>
    </mat-card-header>
    <div class="image">
      <img
        mat-card-image
        src="http://php-jvcmns.test/uploads/jeux/{{ jeux.jeuxPhoto }}"
        alt="Photo of game"
      />
    </div>
    <mat-card-content>
      <ngb-rating [max]="5" [(rate)]="jeux.jeuxNote" [readonly]="true">
        <ng-template let-fill="fill">
          <div [class.filled]="fill === 100" [class.notfilled]="fill === 0">
            <mat-icon>sports_esports</mat-icon>
          </div>
        </ng-template>
      </ngb-rating>
      <br />La note moyenne est : {{ jeux.jeuxNote }}/5
    </mat-card-content>
    <mat-card-content *ngIf="token != null">
      <p>Votre note:</p>
      <ngb-rating [max]="5" [(rate)]="currentRate" [readonly]="false">
        <ng-template let-fill="fill">
          <div [class.filled]="fill === 100" [class.notfilled]="fill === 0">
            <mat-icon>sports_esports</mat-icon>
          </div>
        </ng-template>
      </ngb-rating>
    </mat-card-content>
    <mat-card-actions> </mat-card-actions>
  </mat-card>
</div>

<!-- AFFICHAGE EN CAS DE RECHERCHE -->

<div *ngIf="listeSearch != null" class="listeCard">
  <mat-card class="example-card" *ngFor="let jeux of listeSearch">
    <mat-card-header>
      <mat-card-title *ngIf="jeux.jeuxTitre.length > 30"
        >{{ jeux.jeuxTitre.substring(0, 30) }}...</mat-card-title
      >
      <mat-card-title *ngIf="jeux.jeuxTitre.length < 30">{{
        jeux.jeuxTitre
      }}</mat-card-title>
      <mat-card-subtitle>{{ jeux.jeuxGenre }}</mat-card-subtitle>
      <mat-card-subtitle>{{ jeux.jeuxEditeur }}</mat-card-subtitle>
    </mat-card-header>
    <div class="image">
      <img
        mat-card-image
        src="http://php-jvcmns.test/uploads/jeux/{{ jeux.jeuxPhoto }}"
        alt="Photo of game"
      />
    </div>
    <mat-card-content>
      <ngb-rating [max]="5" [(rate)]="jeux.jeuxNote" [readonly]="true">
        <ng-template let-fill="fill">
          <div [class.filled]="fill === 100" [class.notfilled]="fill === 0">
            <mat-icon>sports_esports</mat-icon>
          </div>
        </ng-template>
      </ngb-rating>
      <br />La note moyenne est : {{ jeux.jeuxNote }}/5
    </mat-card-content>
    <mat-card-content *ngIf="token != null">
      <p>Votre note:</p>
      <ngb-rating [max]="5" [(rate)]="currentRate" [readonly]="false">
        <ng-template let-fill="fill">
          <div [class.filled]="fill === 100" [class.notfilled]="fill === 0">
            <mat-icon>sports_esports</mat-icon>
          </div>
        </ng-template>
      </ngb-rating>
    </mat-card-content>
    <mat-card-actions> </mat-card-actions>
  </mat-card>
</div>
